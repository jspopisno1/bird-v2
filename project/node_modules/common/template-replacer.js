
var keyReg = function() {
    return /@\{(\w+)\}@/g
}

var templateReplacer = function(content) {
    this._content = content
}

templateReplacer.prototype = {
    _content: '',

    /**
     * 替换给定的一些数据
     *
     * @param data
     */
    applyData: function(data) {
        this._content = this._content.replace(keyReg(), function(match, key) {
            if (key in data) {
                return data[key]
            }
        })
        return this
    },

    setContent: function(content) {
        this._content = content
        return this
    },

    getContent: function() {
        return this._content
    },

    /**
     * 替换给定的数据, 并返回结果
     */
    applyDataAndReturn: function(data) {
        return this.applyData(data).getContent()
    }
}

module.exports = function() {
    return new templateReplacer()
}